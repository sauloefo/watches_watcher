{
  "name": "watches_watcher",
  "dockerComposeFile": "compose.yaml",
  "service": "rails-app",
  "initializeCommand": ".devcontainer/scripts/lifecycle-hooks/initialize",
  "onCreateCommand": ".devcontainer/scripts/lifecycle-hooks/on-create",

  "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",

  // Use 'postCreateCommand' to run commands after the container is created.
  "postCreateCommand": "bin/setup --skip-server",

  // Features to add to the dev container. More info: https://containers.dev/features.
  "features": {
    "ghcr.io/devcontainers/features/github-cli:1": {},
    "ghcr.io/rails/devcontainer/features/activestorage": {},
    "ghcr.io/devcontainers/features/docker-outside-of-docker:1": {"moby":false},
    "ghcr.io/rails/devcontainer/features/sqlite3": {}
  },

  "containerEnv": {
    "CAPYBARA_SERVER_PORT": "45678",
    "SELENIUM_HOST": "selenium",
    "KAMAL_REGISTRY_PASSWORD": "$KAMAL_REGISTRY_PASSWORD",
    "PATH": "${containerWorkspaceFolder}/.devcontainer/scripts/cli:${env:PATH}",
    "PGPASSWORD": "root",
    "project_folder": "${containerWorkspaceFolder}"
  },
  "customizations": {
    "vscode": {
      "settings": {
        "files.associations": {
          "*.css": "tailwindcss"
        },
        "tailwindCSS.includeLanguages": {
          "javascript": "javascript",
          "html": "html",
          "css": "css",
          "erb": "erb"
        },
        "tailwindCSS.experimental.classRegex": [
          "class: [\"|']([^\"|']*)"
        ],
        "editor.quickSuggestions": {
          "strings": true
        },
        "emmet.includeLanguages": {
          "erb": "html",
          "ruby": "html"
        },
        "highlight.regexFlags": "gi",
        "highlight.regexes": {
          "(<%(?!#)[\\s\\S]*?%>)": {
            "decorations": [
              {
                "backgroundColor": "#f0d8021c"
              }
            ]
          }
        }
      },
      "extensions": [
        "aki77.vscode-rails-db-schema",
        "bradlc.vscode-tailwindcss",
        "eamodio.gitlens",
        "fabiospampinato.vscode-highlight",
        "ghbozz.hashtag",
        "kaiwood.endwise",
        "ms-azuretools.vscode-docker",
        "shanehofstetter.rails-open-partial",
        "shopify.ruby-extensions-pack",
        "tavo.rails-schema",
        "formulahendry.auto-rename-tag"
      ]
    }
  }
}
